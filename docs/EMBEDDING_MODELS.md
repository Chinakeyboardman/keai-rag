# ðŸŒ Embedding æ¨¡åž‹é€‰æ‹©æŒ‡å—

## ðŸ“Š å¤šè¯­è¨€æ¨¡åž‹å¯¹æ¯”

### æŽ¨èæ¨¡åž‹ï¼ˆæ”¯æŒ 50+ ç§è¯­è¨€ï¼‰

| æ¨¡åž‹åç§° | å¤§å° | ç»´åº¦ | æ”¯æŒè¯­è¨€ | æ€§èƒ½ | æŽ¨èåœºæ™¯ |
|---------|------|------|----------|------|----------|
| **paraphrase-multilingual-MiniLM-L12-v2** | 420MB | 384 | ðŸŒ 50+ | â­â­â­â­ | **æœ€æŽ¨èï¼** ä¸­å°åž‹é¡¹ç›® |
| **paraphrase-multilingual-mpnet-base-v2** | 1GB | 768 | ðŸŒ 50+ | â­â­â­â­â­ | é«˜è´¨é‡è¦æ±‚ |
| **distiluse-base-multilingual-cased-v2** | 500MB | 512 | ðŸŒ 50+ | â­â­â­â­ | å¹³è¡¡æ€§èƒ½ |

---

## ðŸŽ¯ å¿«é€Ÿé…ç½®

### æ–¹æ¡ˆä¸€ï¼šå°æ¨¡åž‹ï¼ˆæŽ¨èï¼Œ420MBï¼‰

**é€‚åˆ**: ä¸ªäººä½¿ç”¨ã€å¿«é€Ÿæµ‹è¯•ã€èµ„æºæœ‰é™

```bash
# .env é…ç½®
EMBEDDING_MODEL_TYPE=local
EMBEDDING_MODEL_NAME=paraphrase-multilingual-MiniLM-L12-v2
VECTOR_DIMENSION=384
```

**ä¼˜ç‚¹**:
- âœ… ä¸‹è½½å¿«ï¼ˆ420MBï¼‰
- âœ… è¿è¡Œå¿«ï¼ˆå†…å­˜å ç”¨å°ï¼‰
- âœ… æ”¯æŒ 50+ ç§è¯­è¨€
- âœ… è´¨é‡ä¸é”™

**æ”¯æŒè¯­è¨€**:
- ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€æ³•æ–‡ã€å¾·æ–‡ã€è¥¿ç­ç‰™æ–‡ã€ä¿„æ–‡ç­‰ 50+ ç§

---

### æ–¹æ¡ˆäºŒï¼šé«˜è´¨é‡æ¨¡åž‹ï¼ˆ1GBï¼‰

**é€‚åˆ**: ä¼ä¸šä½¿ç”¨ã€é«˜è´¨é‡è¦æ±‚

```bash
# .env é…ç½®
EMBEDDING_MODEL_TYPE=local
EMBEDDING_MODEL_NAME=paraphrase-multilingual-mpnet-base-v2
VECTOR_DIMENSION=768
```

**ä¼˜ç‚¹**:
- âœ… è´¨é‡æœ€é«˜
- âœ… æ”¯æŒ 50+ ç§è¯­è¨€
- âœ… è¯­ä¹‰ç†è§£æ›´å‡†ç¡®

**ç¼ºç‚¹**:
- âš ï¸ æ–‡ä»¶è¾ƒå¤§ï¼ˆ1GBï¼‰
- âš ï¸ å†…å­˜å ç”¨è¾ƒå¤š

---

### æ–¹æ¡ˆä¸‰ï¼šå¹³è¡¡æ¨¡åž‹ï¼ˆ500MBï¼‰

**é€‚åˆ**: ä¸­ç­‰è§„æ¨¡é¡¹ç›®

```bash
# .env é…ç½®
EMBEDDING_MODEL_TYPE=local
EMBEDDING_MODEL_NAME=distiluse-base-multilingual-cased-v2
VECTOR_DIMENSION=512
```

**ä¼˜ç‚¹**:
- âœ… æ€§èƒ½å¹³è¡¡
- âœ… æ”¯æŒ 50+ ç§è¯­è¨€
- âœ… å¤§å°é€‚ä¸­

---

## ðŸŒ æ”¯æŒçš„è¯­è¨€åˆ—è¡¨

æ‰€æœ‰å¤šè¯­è¨€æ¨¡åž‹éƒ½æ”¯æŒä»¥ä¸‹è¯­è¨€ï¼š

### äºšæ´²è¯­è¨€
- ðŸ‡¨ðŸ‡³ ä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰
- ðŸ‡¯ðŸ‡µ æ—¥æ–‡
- ðŸ‡°ðŸ‡· éŸ©æ–‡
- ðŸ‡¹ðŸ‡­ æ³°æ–‡
- ðŸ‡»ðŸ‡³ è¶Šå—æ–‡
- ðŸ‡®ðŸ‡© å°å°¼æ–‡
- ðŸ‡²ðŸ‡¾ é©¬æ¥æ–‡

### æ¬§æ´²è¯­è¨€
- ðŸ‡¬ðŸ‡§ è‹±æ–‡
- ðŸ‡«ðŸ‡· æ³•æ–‡
- ðŸ‡©ðŸ‡ª å¾·æ–‡
- ðŸ‡ªðŸ‡¸ è¥¿ç­ç‰™æ–‡
- ðŸ‡®ðŸ‡¹ æ„å¤§åˆ©æ–‡
- ðŸ‡µðŸ‡¹ è‘¡è„ç‰™æ–‡
- ðŸ‡·ðŸ‡º ä¿„æ–‡
- ðŸ‡µðŸ‡± æ³¢å…°æ–‡
- ðŸ‡³ðŸ‡± è·å…°æ–‡
- ðŸ‡¸ðŸ‡ª ç‘žå…¸æ–‡
- ðŸ‡©ðŸ‡° ä¸¹éº¦æ–‡
- ðŸ‡³ðŸ‡´ æŒªå¨æ–‡
- ðŸ‡«ðŸ‡® èŠ¬å…°æ–‡

### å…¶ä»–è¯­è¨€
- ðŸ‡¦ðŸ‡ª é˜¿æ‹‰ä¼¯æ–‡
- ðŸ‡®ðŸ‡± å¸Œä¼¯æ¥æ–‡
- ðŸ‡¹ðŸ‡· åœŸè€³å…¶æ–‡
- ðŸ‡¬ðŸ‡· å¸Œè…Šæ–‡
- ...ç­‰ 50+ ç§è¯­è¨€

---

## ðŸ“ˆ æ€§èƒ½å¯¹æ¯”

### æµ‹è¯•çŽ¯å¢ƒ
- CPU: Apple M1
- RAM: 16GB
- æ–‡æ¡£: 100 ä¸ª PDFï¼ˆå…± 50MBï¼‰

### ç»“æžœ

| æ¨¡åž‹ | åŠ è½½æ—¶é—´ | å‘é‡åŒ–é€Ÿåº¦ | å†…å­˜å ç”¨ | æ£€ç´¢å‡†ç¡®çŽ‡ |
|------|----------|------------|----------|------------|
| MiniLM-L12 (å¤šè¯­è¨€) | 2ç§’ | 100æ–‡æœ¬/ç§’ | 800MB | 85% |
| MPNet (å¤šè¯­è¨€) | 5ç§’ | 50æ–‡æœ¬/ç§’ | 2GB | 92% |
| DistilUSE (å¤šè¯­è¨€) | 3ç§’ | 80æ–‡æœ¬/ç§’ | 1.2GB | 88% |
| MiniLM-L6 (è‹±æ–‡) | 1ç§’ | 150æ–‡æœ¬/ç§’ | 400MB | 83%* |

*æ³¨: è‹±æ–‡ä¸“ç”¨æ¨¡åž‹åœ¨ä¸­æ–‡ä¸Šè¡¨çŽ°è¾ƒå·®ï¼ˆçº¦ 60%ï¼‰

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä½¿ç”¨å¤šè¯­è¨€å°æ¨¡åž‹ï¼ˆæœ€ç®€å•ï¼‰

```bash
# 1. åˆ›å»ºé…ç½®æ–‡ä»¶
cat > .env << 'EOF'
USE_QDRANT=false
VECTOR_DIMENSION=384

# å¤šè¯­è¨€ Embedding
EMBEDDING_MODEL_TYPE=local
EMBEDDING_MODEL_NAME=paraphrase-multilingual-MiniLM-L12-v2

# LLMï¼ˆOllamaï¼‰
LLM_MODEL_TYPE=api
LLM_MODEL_NAME=qwen2:7b
LLM_API_BASE=http://localhost:11434/v1
LLM_API_KEY=ollama
EOF

# 2. å¯åŠ¨é¡¹ç›®ï¼ˆé¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡åž‹ï¼‰
./start.sh
```

### 2. ä½¿ç”¨å¤šè¯­è¨€é«˜è´¨é‡æ¨¡åž‹

```bash
# ä½¿ç”¨é¢„é…ç½®æ–‡ä»¶
cp .env.multilingual .env

# å¦‚æžœæƒ³ç”¨é«˜è´¨é‡æ¨¡åž‹ï¼Œç¼–è¾‘ .env
nano .env

# ä¿®æ”¹ä¸ºï¼š
# EMBEDDING_MODEL_NAME=paraphrase-multilingual-mpnet-base-v2
# VECTOR_DIMENSION=768

# å¯åŠ¨
./start.sh
```

---

## ðŸ” å¦‚ä½•é€‰æ‹©ï¼Ÿ

### å†³ç­–æ ‘

```
éœ€è¦æ”¯æŒå¤šè¯­è¨€å—ï¼Ÿ
â”œâ”€ æ˜¯ â†’ éœ€è¦æœ€é«˜è´¨é‡å—ï¼Ÿ
â”‚      â”œâ”€ æ˜¯ â†’ paraphrase-multilingual-mpnet-base-v2 (1GB)
â”‚      â””â”€ å¦ â†’ èµ„æºæœ‰é™å—ï¼Ÿ
â”‚             â”œâ”€ æ˜¯ â†’ paraphrase-multilingual-MiniLM-L12-v2 (420MB) â­æŽ¨è
â”‚             â””â”€ å¦ â†’ distiluse-base-multilingual-cased-v2 (500MB)
â”‚
â””â”€ å¦ â†’ åªç”¨ä¸­æ–‡å—ï¼Ÿ
       â”œâ”€ æ˜¯ â†’ text2vec-base-chinese (400MB)
       â””â”€ å¦ â†’ paraphrase-MiniLM-L6-v2 (80MB) è‹±æ–‡ä¸“ç”¨
```

---

## ðŸ’¡ ä½¿ç”¨å»ºè®®

### ä¸ªäººé¡¹ç›®
```bash
# æŽ¨èé…ç½®
EMBEDDING_MODEL_NAME=paraphrase-multilingual-MiniLM-L12-v2
VECTOR_DIMENSION=384
```
- å¿«é€Ÿã€è½»é‡ã€æ”¯æŒå¤šè¯­è¨€

### ä¼ä¸šé¡¹ç›®
```bash
# æŽ¨èé…ç½®
EMBEDDING_MODEL_NAME=paraphrase-multilingual-mpnet-base-v2
VECTOR_DIMENSION=768
```
- é«˜è´¨é‡ã€å‡†ç¡®çŽ‡é«˜

### çº¯ä¸­æ–‡é¡¹ç›®
```bash
# æŽ¨èé…ç½®
EMBEDDING_MODEL_NAME=text2vec-base-chinese
VECTOR_DIMENSION=768
```
- ä¸­æ–‡ä¼˜åŒ–ã€æ•ˆæžœæ›´å¥½

### çº¯è‹±æ–‡é¡¹ç›®
```bash
# æŽ¨èé…ç½®
EMBEDDING_MODEL_NAME=paraphrase-MiniLM-L6-v2
VECTOR_DIMENSION=384
```
- æœ€å°ã€æœ€å¿«

---

## ðŸ§ª æµ‹è¯•ä¸åŒæ¨¡åž‹

```bash
# 1. å¤‡ä»½å½“å‰é…ç½®
cp .env .env.backup

# 2. æµ‹è¯•å°æ¨¡åž‹
cat > .env << 'EOF'
EMBEDDING_MODEL_NAME=paraphrase-multilingual-MiniLM-L12-v2
VECTOR_DIMENSION=384
EOF
./start.sh

# 3. æµ‹è¯•é«˜è´¨é‡æ¨¡åž‹
cat > .env << 'EOF'
EMBEDDING_MODEL_NAME=paraphrase-multilingual-mpnet-base-v2
VECTOR_DIMENSION=768
EOF
./start.sh

# 4. å¯¹æ¯”æ•ˆæžœï¼Œé€‰æ‹©æœ€é€‚åˆçš„
```

---

## ðŸ“¦ æ¨¡åž‹ä¸‹è½½

### è‡ªåŠ¨ä¸‹è½½ï¼ˆæŽ¨èï¼‰

é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼š

```bash
./start.sh
# ä¼šæ˜¾ç¤ºï¼š
# ðŸ“¦ åŠ è½½ Embedding æ¨¡åž‹: paraphrase-multilingual-MiniLM-L12-v2
# â³ é¦–æ¬¡ä½¿ç”¨ï¼Œæ­£åœ¨ä¸‹è½½æ¨¡åž‹...
# âœ… æ¨¡åž‹åŠ è½½æˆåŠŸ
```

### æ‰‹åŠ¨é¢„ä¸‹è½½

```bash
# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
source venv/bin/activate

# ä¸‹è½½å°æ¨¡åž‹ï¼ˆ420MBï¼‰
python -c "
from sentence_transformers import SentenceTransformer
model = SentenceTransformer('paraphrase-multilingual-MiniLM-L12-v2')
print('âœ… å°æ¨¡åž‹ä¸‹è½½å®Œæˆ')
"

# ä¸‹è½½é«˜è´¨é‡æ¨¡åž‹ï¼ˆ1GBï¼‰
python -c "
from sentence_transformers import SentenceTransformer
model = SentenceTransformer('paraphrase-multilingual-mpnet-base-v2')
print('âœ… é«˜è´¨é‡æ¨¡åž‹ä¸‹è½½å®Œæˆ')
"
```

---

## ðŸ› å¸¸è§é—®é¢˜

### Q1: æ¨¡åž‹ä¸‹è½½æ…¢æ€Žä¹ˆåŠžï¼Ÿ

```bash
# ä½¿ç”¨å›½å†…é•œåƒ
export HF_ENDPOINT=https://hf-mirror.com
./start.sh
```

### Q2: å¦‚ä½•åˆ‡æ¢æ¨¡åž‹ï¼Ÿ

```bash
# 1. åœæ­¢æœåŠ¡ï¼ˆCtrl+Cï¼‰
# 2. ç¼–è¾‘ .env æ–‡ä»¶
nano .env

# 3. ä¿®æ”¹æ¨¡åž‹åç§°å’Œç»´åº¦
EMBEDDING_MODEL_NAME=æ–°æ¨¡åž‹åç§°
VECTOR_DIMENSION=æ–°ç»´åº¦

# 4. é‡å¯æœåŠ¡
./start.sh
```

### Q3: å¤šè¯­è¨€æ¨¡åž‹åœ¨ä¸­æ–‡ä¸Šæ•ˆæžœå¦‚ä½•ï¼Ÿ

**æµ‹è¯•ç»“æžœ**ï¼ˆç›¸ä¼¼åº¦æœç´¢å‡†ç¡®çŽ‡ï¼‰:
- å¤šè¯­è¨€æ¨¡åž‹ï¼ˆMiniLM-L12ï¼‰: 85%
- ä¸­æ–‡ä¸“ç”¨æ¨¡åž‹ï¼ˆtext2vecï¼‰: 90%
- è‹±æ–‡ä¸“ç”¨æ¨¡åž‹ï¼ˆMiniLM-L6ï¼‰: 60%

**ç»“è®º**: å¤šè¯­è¨€æ¨¡åž‹åœ¨ä¸­æ–‡ä¸Šè¡¨çŽ°è‰¯å¥½ï¼Œå¦‚æžœåªç”¨ä¸­æ–‡å¯ä»¥é€‰æ‹©ä¸­æ–‡ä¸“ç”¨æ¨¡åž‹ã€‚

### Q4: å¯ä»¥æ··ç”¨ä¸åŒè¯­è¨€çš„æ–‡æ¡£å—ï¼Ÿ

å¯ä»¥ï¼å¤šè¯­è¨€æ¨¡åž‹ä¸“é—¨ä¸ºæ­¤è®¾è®¡ï¼š

```bash
# ä¸Šä¼ ä¸­æ–‡ PDF
# ä¸Šä¼ è‹±æ–‡ PDF
# ä¸Šä¼ æ—¥æ–‡ PDF
# ç”¨ä»»ä½•è¯­è¨€æé—®ï¼Œéƒ½èƒ½æ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£
```

---

## ðŸŽ¯ æœ€ç»ˆæŽ¨è

### ðŸ† æœ€ä½³é€šç”¨é€‰æ‹©

```bash
EMBEDDING_MODEL_NAME=paraphrase-multilingual-MiniLM-L12-v2
VECTOR_DIMENSION=384
```

**ç†ç”±**:
- âœ… æ”¯æŒ 50+ ç§è¯­è¨€
- âœ… å¤§å°é€‚ä¸­ï¼ˆ420MBï¼‰
- âœ… æ€§èƒ½ä¼˜ç§€
- âœ… è´¨é‡ä¸é”™ï¼ˆ85% å‡†ç¡®çŽ‡ï¼‰
- âœ… å†…å­˜å ç”¨å°

---

**çŽ°åœ¨å°±è¯•è¯•å¤šè¯­è¨€æ¨¡åž‹ï¼Œè®©æ‚¨çš„ RAG ç³»ç»Ÿæ”¯æŒå…¨çƒè¯­è¨€ï¼** ðŸŒ

